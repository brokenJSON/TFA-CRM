<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>TFA CRM – Database Schema</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* ======= TFA BRAND TOKENS ======= */
    :root{
      --tfa-green: #063F1E;          /* Primary - Deep Green */
      --tfa-gold:  #D89F01;          /* Secondary - Heritage Gold */
      --tfa-white: #FFFFFF;          /* White */
      --tfa-beige: #F9F8F6;          /* Light Beige */
      --tfa-light: #E3E3E3;          /* Light Gray */
      --tfa-mid:   #888888;          /* Medium Gray */
      --tfa-char:  #222222;          /* Dark Gray / Charcoal */

      --bg: var(--tfa-beige);
      --text: var(--tfa-char);
      --muted: var(--tfa-mid);
      --card: var(--tfa-white);
      --border: var(--tfa-light);
      --focus: var(--tfa-gold);
      --primary: var(--tfa-green);
      --accent: var(--tfa-gold);
      --radius: 14px;
      --shadow: 0 10px 28px rgba(0,0,0,.10);
    }

    /* ======= Base ======= */
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0;
      background: var(--bg);
      color: var(--text);
      font: 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    a{ color: var(--primary); text-decoration: none }
    a:hover{ text-decoration: underline }
    h1,h2,h3{ margin:.25rem 0 .5rem }
    h1{ font-size:clamp(22px, 2.6vw, 30px); }
    h2{ font-size:clamp(18px, 2.2vw, 24px); }
    h3{ font-size:clamp(16px, 2vw, 20px); }
    p{ margin:.25rem 0 .75rem }

    /* ======= Header (Branded) ======= */
    .brand-bar{
      background: var(--primary);
      color: var(--tfa-white);
      border-bottom: 6px solid var(--accent);
    }
    .container{
      width:min(1100px, 92vw);
      margin-inline:auto;
      padding: 18px 0;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:46px; height:46px; border-radius:12px;
      background: var(--accent);
      display:grid; place-items:center;
      color: var(--primary);
      font-weight:800;
      box-shadow: inset 0 0 0 3px rgba(0,0,0,.08);
    }
    .brand .title{
      line-height:1.1;
    }
    .brand .title b{ display:block; letter-spacing:.2px }
    .brand .title small{ opacity:.9; font-weight:500 }

    /* ======= Navigation ======= */
    .nav{
      display:flex; gap:14px; align-items:center; justify-content:space-between; margin-top:8px;
    }
    /* Match dashboard/contacts button look */
    .nav a, .nav button{
      padding:8px 12px;
      border-radius:10px;
      border:1px solid var(--primary);
      background:#fff;
      color:var(--primary);
      cursor:pointer;
      text-decoration:none;
    }
    .nav a:hover, .nav button:hover{ text-decoration:underline }
    .nav .logout{ border-color:#8b1a1a; color:#8b1a1a; background:#fff }

    /* ======= Shell Layout ======= */
    .shell{
      width:min(1100px, 92vw);
      margin:18px auto 40px;
      display:grid; gap:18px;
    }

    /* ======= Card ======= */
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:18px;
    }
    .card h2{
      margin-top:0;
      border-bottom:1px solid var(--border);
      padding-bottom:8px;
    }

    /* ======= Database Schema Styling ======= */
    .schema-overview{
      background:linear-gradient(0deg, rgba(216,159,1,.08), rgba(216,159,1,.08));
      border:1px solid var(--accent);
      color:#5b4500;
      margin-bottom:20px;
    }

    .table-schema{
      margin:20px 0;
      border:1px solid var(--border);
      border-radius: var(--radius);
      overflow:hidden;
    }
    .table-header{
      background:var(--primary);
      color:var(--tfa-white);
      padding:12px 16px;
      font-weight:700;
      font-size:18px;
    }
    .table-description{
      background:var(--tfa-beige);
      padding:12px 16px;
      border-bottom:1px solid var(--border);
      font-style:italic;
      color:var(--muted);
    }
    .columns-table{
      width:100%;
      border-collapse:collapse;
    }
    .columns-table th{
      background:var(--tfa-light);
      padding:10px 12px;
      text-align:left;
      font-weight:600;
      border-bottom:1px solid var(--border);
    }
    .columns-table td{
      padding:8px 12px;
      border-bottom:1px solid var(--border);
      vertical-align:top;
    }
    .columns-table tr:hover{
      background:rgba(216,159,1,.05);
    }
    .column-name{
      font-family:monospace;
      font-weight:600;
      color:var(--primary);
    }
    .column-type{
      font-family:monospace;
      background:var(--tfa-light);
      padding:2px 6px;
      border-radius:4px;
      font-size:13px;
    }
    .column-constraints{
      font-size:13px;
      color:var(--muted);
    }
    .pk{ color:#d63384; font-weight:600; }
    .fk{ color:#0d6efd; font-weight:600; }
    .unique{ color:#198754; font-weight:600; }
    .index{ color:#fd7e14; font-weight:600; }

    .relationships{
      margin-top:30px;
    }
    .relationship-item{
      background:var(--tfa-beige);
      border:1px solid var(--border);
      border-radius:8px;
      padding:12px;
      margin:8px 0;
    }
    .relationship-title{
      font-weight:600;
      color:var(--primary);
      margin-bottom:4px;
    }

    .accent-underline{
      text-decoration: underline; text-decoration-color: var(--accent); text-decoration-thickness: 3px;
      text-underline-offset: 4px;
    }

    /* ======= Footer ======= */
    footer{
      width:min(1100px, 92vw); margin: 18px auto 50px;
      color: var(--muted);
      font-size:14px;
    }
  </style>
</head>
<body>
  <!-- ========= BRANDED HEADER ========= -->
  <header class="brand-bar">
    <div class="container">
      <div class="brand" role="banner" aria-label="The Family Advocates CRM Canada">
        <img src="images/TFA_Logo_Asset 14.png" class="logo" alt="The Family Advocates logo">
        <div class="title">
          <b>The Family Advocates Canada</b>
          <small>Database Schema</small>
        </div>
      </div>
      <div class="nav">
        <div>
          <a href="dashboard.html">Dashboard</a>
          <a href="contacts.html">Contacts</a>
          <a href="database-schema.html">Database Schema</a>
        </div>
        <div>
          <button class="logout" onclick="logout()">Log Out</button>
        </div>
      </div>
    </div>
  </header>

  <!-- ========= MAIN CONTENT ========= -->
  <main class="shell" role="main">
    <!-- SCHEMA OVERVIEW -->
    <div class="card schema-overview">
      <h2 class="accent-underline">Database Schema Overview</h2>
      <p>
        This database schema is designed to support The Family Advocates CRM system with four core tables that handle 
        staff authentication, contact management, volunteer tracking, and volunteer hours recording. The schema follows 
        best practices for data normalization and includes proper indexing for performance.
      </p>
      <p>
        <strong>Why these tables?</strong> These four tables provide a solid foundation that can handle:
        • Admin/staff login and role management
        • Comprehensive contact management (participants, donors, partners)
        • Volunteer information and skills tracking
        • Detailed volunteer hours logging for reporting and recognition
      </p>
    </div>

    <!-- STAFF TABLE -->
    <div class="card">
      <div class="table-schema">
        <div class="table-header">1. staff</div>
        <div class="table-description">
          Admin/staff login and role management. Handles authentication and basic user information.
        </div>
        <table class="columns-table">
          <thead>
            <tr>
              <th>Column Name</th>
              <th>Data Type</th>
              <th>Constraints</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="column-name">id</span></td>
              <td><span class="column-type">INTEGER</span></td>
              <td><span class="column-constraints pk">PRIMARY KEY, AUTO_INCREMENT</span></td>
              <td>Unique identifier for each staff member</td>
            </tr>
            <tr>
              <td><span class="column-name">first_name</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NOT NULL</span></td>
              <td>Staff member's first name</td>
            </tr>
            <tr>
              <td><span class="column-name">last_name</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NOT NULL</span></td>
              <td>Staff member's last name</td>
            </tr>
            <tr>
              <td><span class="column-name">email</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints unique">UNIQUE, INDEX</span></td>
              <td>Login email address (must be unique)</td>
            </tr>
            <tr>
              <td><span class="column-name">phone</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Contact phone number</td>
            </tr>
            <tr>
              <td><span class="column-name">role</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">ENUM: admin, staff</span></td>
              <td>User role for access control</td>
            </tr>
            <tr>
              <td><span class="column-name">password_hash</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NOT NULL</span></td>
              <td>Hashed password for authentication</td>
            </tr>
            <tr>
              <td><span class="column-name">created_at</span></td>
              <td><span class="column-type">TIMESTAMP</span></td>
              <td><span class="column-constraints">DEFAULT NOW()</span></td>
              <td>Account creation timestamp</td>
            </tr>
            <tr>
              <td><span class="column-name">updated_at</span></td>
              <td><span class="column-type">TIMESTAMP</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Last update timestamp</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- CUSTOMER_MEMBERS TABLE -->
    <div class="card">
      <div class="table-schema">
        <div class="table-header">2. customer_members</div>
        <div class="table-description">
          Generic contacts table for participants, donors, partners, and other community members. Includes address fields and tagging system.
        </div>
        <table class="columns-table">
          <thead>
            <tr>
              <th>Column Name</th>
              <th>Data Type</th>
              <th>Constraints</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="column-name">id</span></td>
              <td><span class="column-type">INTEGER</span></td>
              <td><span class="column-constraints pk">PRIMARY KEY, AUTO_INCREMENT</span></td>
              <td>Unique identifier for each contact</td>
            </tr>
            <tr>
              <td><span class="column-name">first_name</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NOT NULL</span></td>
              <td>Contact's first name</td>
            </tr>
            <tr>
              <td><span class="column-name">last_name</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NOT NULL</span></td>
              <td>Contact's last name</td>
            </tr>
            <tr>
              <td><span class="column-name">email</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints index">INDEX</span></td>
              <td>Email address for communication</td>
            </tr>
            <tr>
              <td><span class="column-name">phone</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Phone number</td>
            </tr>
            <tr>
              <td><span class="column-name">type</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">ENUM: participant, donor, partner, general</span></td>
              <td>Contact type for segmentation</td>
            </tr>
            <tr>
              <td><span class="column-name">tags</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Comma-separated tags for filtering</td>
            </tr>
            <tr>
              <td><span class="column-name">address_line1</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Primary address line</td>
            </tr>
            <tr>
              <td><span class="column-name">address_line2</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Secondary address line (apt, suite, etc.)</td>
            </tr>
            <tr>
              <td><span class="column-name">city</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>City name</td>
            </tr>
            <tr>
              <td><span class="column-name">province_state</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Province or state</td>
            </tr>
            <tr>
              <td><span class="column-name">postal_code</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Postal/ZIP code</td>
            </tr>
            <tr>
              <td><span class="column-name">country</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Country name</td>
            </tr>
            <tr>
              <td><span class="column-name">created_at</span></td>
              <td><span class="column-type">TIMESTAMP</span></td>
              <td><span class="column-constraints">DEFAULT NOW()</span></td>
              <td>Record creation timestamp</td>
            </tr>
            <tr>
              <td><span class="column-name">updated_at</span></td>
              <td><span class="column-type">TIMESTAMP</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Last update timestamp</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- VOLUNTEERS TABLE -->
    <div class="card">
      <div class="table-schema">
        <div class="table-header">3. volunteers</div>
        <div class="table-description">
          Volunteer information including skills, availability, and total hours tracked. Separate from customer_members for specialized volunteer management.
        </div>
        <table class="columns-table">
          <thead>
            <tr>
              <th>Column Name</th>
              <th>Data Type</th>
              <th>Constraints</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="column-name">id</span></td>
              <td><span class="column-type">INTEGER</span></td>
              <td><span class="column-constraints pk">PRIMARY KEY, AUTO_INCREMENT</span></td>
              <td>Unique identifier for each volunteer</td>
            </tr>
            <tr>
              <td><span class="column-name">first_name</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NOT NULL</span></td>
              <td>Volunteer's first name</td>
            </tr>
            <tr>
              <td><span class="column-name">last_name</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NOT NULL</span></td>
              <td>Volunteer's last name</td>
            </tr>
            <tr>
              <td><span class="column-name">email</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints unique">UNIQUE, INDEX</span></td>
              <td>Email address (must be unique)</td>
            </tr>
            <tr>
              <td><span class="column-name">phone</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Contact phone number</td>
            </tr>
            <tr>
              <td><span class="column-name">skills</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Volunteer skills and expertise</td>
            </tr>
            <tr>
              <td><span class="column-name">availability</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Availability schedule and preferences</td>
            </tr>
            <tr>
              <td><span class="column-name">total_hours</span></td>
              <td><span class="column-type">INTEGER</span></td>
              <td><span class="column-constraints">DEFAULT 0</span></td>
              <td>Total volunteer hours (calculated field)</td>
            </tr>
            <tr>
              <td><span class="column-name">created_at</span></td>
              <td><span class="column-type">TIMESTAMP</span></td>
              <td><span class="column-constraints">DEFAULT NOW()</span></td>
              <td>Record creation timestamp</td>
            </tr>
            <tr>
              <td><span class="column-name">updated_at</span></td>
              <td><span class="column-type">TIMESTAMP</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Last update timestamp</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- VOLUNTEER_HOURS TABLE -->
    <div class="card">
      <div class="table-schema">
        <div class="table-header">4. volunteer_hours</div>
        <div class="table-description">
          Detailed volunteer hours tracking for reporting and recognition. Links to volunteers table and includes validation rules.
        </div>
        <table class="columns-table">
          <thead>
            <tr>
              <th>Column Name</th>
              <th>Data Type</th>
              <th>Constraints</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="column-name">id</span></td>
              <td><span class="column-type">INTEGER</span></td>
              <td><span class="column-constraints pk">PRIMARY KEY, AUTO_INCREMENT</span></td>
              <td>Unique identifier for each hours entry</td>
            </tr>
            <tr>
              <td><span class="column-name">volunteer_id</span></td>
              <td><span class="column-type">INTEGER</span></td>
              <td><span class="column-constraints fk">FOREIGN KEY → volunteers.id, INDEX</span></td>
              <td>Reference to the volunteer</td>
            </tr>
            <tr>
              <td><span class="column-name">entry_date</span></td>
              <td><span class="column-type">DATE</span></td>
              <td><span class="column-constraints">NOT NULL</span></td>
              <td>Date when volunteer hours were performed</td>
            </tr>
            <tr>
              <td><span class="column-name">hours</span></td>
              <td><span class="column-type">DECIMAL(5,2)</span></td>
              <td><span class="column-constraints">> 0, NOT NULL</span></td>
              <td>Number of hours (supports partial hours)</td>
            </tr>
            <tr>
              <td><span class="column-name">notes</span></td>
              <td><span class="column-type">TEXT</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Optional notes about the volunteer work</td>
            </tr>
            <tr>
              <td><span class="column-name">created_at</span></td>
              <td><span class="column-type">TIMESTAMP</span></td>
              <td><span class="column-constraints">DEFAULT NOW()</span></td>
              <td>Record creation timestamp</td>
            </tr>
            <tr>
              <td><span class="column-name">updated_at</span></td>
              <td><span class="column-type">TIMESTAMP</span></td>
              <td><span class="column-constraints">NULLABLE</span></td>
              <td>Last update timestamp</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- RELATIONSHIPS AND DESIGN RATIONALE -->
    <div class="card">
      <h2 class="accent-underline">Database Relationships & Design Rationale</h2>
      
      <div class="relationships">
        <div class="relationship-item">
          <div class="relationship-title">volunteer_hours → volunteers (One-to-Many)</div>
          <p>Each volunteer can have multiple hour entries, but each hour entry belongs to exactly one volunteer. This allows for detailed tracking of volunteer contributions over time.</p>
        </div>
      </div>

      <h3>Why These Four Tables?</h3>
      <ul>
        <li><strong>staff:</strong> Essential for secure authentication and role-based access control</li>
        <li><strong>customer_members:</strong> Flexible contact management that can handle all community member types with proper segmentation</li>
        <li><strong>volunteers:</strong> Specialized volunteer management with skills and availability tracking</li>
        <li><strong>volunteer_hours:</strong> Detailed time tracking for reporting, recognition, and compliance</li>
      </ul>

      <h3>Key Design Decisions</h3>
      <ul>
        <li><strong>Separate volunteers from customer_members:</strong> Volunteers need specialized fields (skills, availability, total_hours) that don't apply to all contacts</li>
        <li><strong>Type field in customer_members:</strong> Allows segmentation of participants, donors, partners without separate tables</li>
        <li><strong>Tags field:</strong> Flexible filtering system that can be expanded without schema changes</li>
        <li><strong>DECIMAL(5,2) for hours:</strong> Supports partial hours (e.g., 2.5 hours) with reasonable precision</li>
        <li><strong>Proper indexing:</strong> Email fields and foreign keys are indexed for performance</li>
      </ul>

      <h3>Future Extensibility</h3>
      <p>This schema provides a solid foundation that can be extended with additional tables as needed:</p>
      <ul>
        <li>Events/Programs table for tracking volunteer assignments</li>
        <li>Donations table for financial tracking</li>
        <li>Communications log for interaction history</li>
        <li>Reports and analytics tables</li>
      </ul>
    </div>
  </main>

  <footer>
    <small>
      Database Schema Design for The Family Advocates CRM System
    </small>
  </footer>

  <script>
    // Non-blocking notice if not logged in
    const LS = { session: "tfa_session" };
    if(!localStorage.getItem(LS.session)){
      console.warn("Not logged in: Viewing schema page for reference only.");
      // Optional: you could render a top banner here if needed; keeping minimal per request.
    }

    // Simple logout function
    function logout(){
      localStorage.removeItem("tfa_session");
      window.location.href = "main.html";
    }
  </script>
</body>
</html>
